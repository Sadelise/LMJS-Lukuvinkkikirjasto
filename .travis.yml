language: java
addons:
  firefox: '49.0'
jdk:
- oraclejdk8
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- sleep 3
before_install:
- wget https://github.com/mozilla/geckodriver/releases/download/v0.15.0/geckodriver-v0.15.0-linux64.tar.gz
- mkdir geckodriver
- tar -xzf geckodriver-v0.15.0-linux64.tar.gz -C geckodriver
- export PATH=$PATH:$PWD/geckodriver
- chmod +x chromedriver.exe

deploy:
  provider: heroku
  api_key:
    secure: MO6sIZMWB8qyJf1CzIzOCREheY/xiGAzPY5qt703zt2R8+GltRTYsF8poNlBnHKMGZ8p/DOr1gBIxLhy6446fQ075MohFA60KAbk9bIMJV79unjWHmfQfdc5XWHhCm957erpzosvfvyrrScYbfBxuhToJEqzW5j/5nXvnkO2x/hTryItGIFIpQEgWSEQML3uUFS3l/I2nKcpqhuZR2g7zRI2bPjCejG9LSw0JJ69fB2Npj25ykyysB/HzHrUEMg48bm/22afkEbdzI8efr15FjKZnltvsgli3yxs48tyh4VKPm0jHJnv/XOs+vUeuiMLru/0vvQVRQPJnN98JX3zfOzu1bSnxE+gMo8pRHDNNywlx3WWrgcQq7WdgNqHBIWkU8N3JuVvELrZxfgkP4Sug8Nt9xM+8NqAqLafKruFA+XF5oFhUM+a52hjkvhmY+ET9nP33RnFg489hm3eLDo3+QInJMHOznho4KvdFxgiT4nLjOHVeATH66xDgMk5ZOY/qzMrJkvwXRnRtkjJApmZ4NGy13q5/hMOvafv+MGx6MDmcDydPoWavo92MeDRFw1sNGaaj5JUJa3zEuIQfuJ0BVi92wj1vy0rK12XbEx7cziym2GfO2SYTzyKs1giYjKhNmscpYjqsj7S9ptHANnBXhMa3Nf6e8DJ3iA5jcNaqbY=
  app: lmjs-lukuvinkkikirjasto

script:
  - ./gradlew check
  - ./gradlew jacocoTestReport
after_success:
  - bash <(curl -s https://codecov.io/bash)
